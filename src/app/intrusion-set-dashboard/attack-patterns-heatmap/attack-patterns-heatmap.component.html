<mat-card id="heatmapCard" class="margin-top cardHoverShadow" [hidden]="!showHeatMap">
    <mat-card-title>Tactics Used (HeatMap Chart View)</mat-card-title>
    <unf-heatmap #heatmap [heatMapData]="heatMapData" [options]="heatMapOptions"
            (onTooltip)="highlightAttackPattern($event)" (onClick)="showHeatMapTooltip($event, false)"></unf-heatmap>
</mat-card>

<ng-template #apTooltipTemplate>
    <div class="col-md-12 attack-pattern-tooltip">
        <mat-card>
            <mat-card-subtitle>
                <div class="flex1"><label>{{attackPattern.attributes.name}}</label></div>
                <div [hidden]="hoverTooltip">
                    <button mat-button type="button" class="mat-primary">
                        <a target="_blank" href="/#/stix/attack-patterns/{{attackPattern.id}}">Details</a>
                    </button>
                    <button mat-button type="button" (click)="hideAttackPatternTooltip(attackPattern)">Close</button>
                </div>
            </mat-card-subtitle>
            <mat-card-content>
                <div class="row">
                    <div class="col-md-3"><label>Description</label></div>
                    <div class="col-md-8 attack-pattern-desc" [innerHTML]="attackPattern.attributes.description"></div>
                </div>
                <div class="row" *ngIf="attackPattern.attributes.x_mitre_data_sources">
                    <div class="col-md-3"><label>Data Sources</label></div>
                    <div class="col-md-9 attack-pattern-sources">{{attackPattern.attributes.x_mitre_data_sources.join(', ')}}</div>
                </div>
                <div class="row" *ngIf="attackPattern.attributes.x_mitre_platforms">
                    <div class="col-md-3"><label>Platforms</label></div>
                    <div class="col-md-9 attack-pattern-platforms">{{attackPattern.attributes.x_mitre_platforms.join(', ')}}</div>
                </div>
                <div class="row" *ngIf="attackPhases">
                    <div class="col-md-3"><label>Phases</label></div>
                    <div class="col-md-9 attack-pattern-phases">{{attackPhases.join(', ') | capitalize}}</div>
                </div>
            </mat-card-content>
        </mat-card>
    </div>
</ng-template>
