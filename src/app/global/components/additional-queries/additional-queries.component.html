<div class="additionalQueriesComponent">
  <div class="uf-collapsible-control mb-10" (click)="showForm = !showForm">
    <i class="material-icons mat-24 transition02" [ngClass]="{'rotate90': showForm}">chevron_right</i>
    <span class="h5">&nbsp;Add Additional Queries</span>
  </div>
  <div class="uf-well-accent" @heightCollapse *ngIf="showForm">
    <form [formGroup]="localForm" novalidate (ngSubmit)="addToParent()" *ngIf="formResetComplete">

      <mat-form-field class="full-width mb-6">
        <input matInput required placeholder="Name" formControlName="name">
        <mat-error *ngIf="localForm.get('name').hasError('required')">
          Name is <strong>required</strong>
        </mat-error>
      </mat-form-field>

      <mat-form-field class="full-width mb-6">
        <textarea matInput required placeholder="Query" formControlName="query" (keyup)="queryChange(localForm.get('query'))"></textarea>
        <mat-error *ngIf="localForm.get('query').hasError('required')">
          Query is <strong>required</strong>
        </mat-error>
      </mat-form-field>
      
      <!-- TODO uncomment when performance is improved -->
      <!-- <pii-check-message [formCtrl]="localForm.get('query')"></pii-check-message> -->

      <button mat-button color="accent" [disabled]="localForm.status === 'INVALID'" type="submit" class="mb-3">Attach Query to {{ parentDocumentType | capitalize }}</button>
    </form>
  </div>
</div>
